<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>LUFA Library - Mass Storage Host Demo: Lib/MassStoreCommands.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LUFA Library - Mass Storage Host Demo
   &#160;<span id="projectnumber">0.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00009.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">MassStoreCommands.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;avr/io.h&gt;</code><br />
<code>#include &quot;<a class="el" href="a00012.html">MassStorageHost.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a00010.html">SCSI_Codes.h</a>&quot;</code><br />
<code>#include &lt;LUFA/Drivers/USB/USB.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html">CommandBlockWrapper_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00002.html">CommandStatusWrapper_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html">SCSI_Request_Sense_Response_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00004.html">SCSI_Inquiry_Response_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00003.html">SCSI_Capacity_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:acb9a039894443da8410cb4fa3df22be6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#acb9a039894443da8410cb4fa3df22be6">REQ_MassStorageReset</a>&#160;&#160;&#160;0xFF</td></tr>
<tr class="separator:acb9a039894443da8410cb4fa3df22be6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0876c839c43c9c05f5a917d3b46ceaf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ac0876c839c43c9c05f5a917d3b46ceaf">REQ_GetMaxLUN</a>&#160;&#160;&#160;0xFE</td></tr>
<tr class="separator:ac0876c839c43c9c05f5a917d3b46ceaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6720d81afa7c89b4ac87928c591883c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ac6720d81afa7c89b4ac87928c591883c">CBW_SIGNATURE</a>&#160;&#160;&#160;0x43425355UL</td></tr>
<tr class="separator:ac6720d81afa7c89b4ac87928c591883c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa64c08764b0b19dd484ee177c32bcf49"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#aa64c08764b0b19dd484ee177c32bcf49">CSW_SIGNATURE</a>&#160;&#160;&#160;0x53425355UL</td></tr>
<tr class="separator:aa64c08764b0b19dd484ee177c32bcf49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67558cbba737fb0f865d76920dde0449"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#a67558cbba737fb0f865d76920dde0449">COMMAND_DIRECTION_DATA_OUT</a>&#160;&#160;&#160;(0 &lt;&lt; 7)</td></tr>
<tr class="separator:a67558cbba737fb0f865d76920dde0449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d1cac717714b1805917994b1671b61b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#a0d1cac717714b1805917994b1671b61b">COMMAND_DIRECTION_DATA_IN</a>&#160;&#160;&#160;(1 &lt;&lt; 7)</td></tr>
<tr class="separator:a0d1cac717714b1805917994b1671b61b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae99a70b8e008b17033dcfb19c8976cb0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ae99a70b8e008b17033dcfb19c8976cb0">COMMAND_DATA_TIMEOUT_MS</a>&#160;&#160;&#160;10000</td></tr>
<tr class="separator:ae99a70b8e008b17033dcfb19c8976cb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3dcc3c4f280d547ff56a8f4d3f37ccb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ab3dcc3c4f280d547ff56a8f4d3f37ccb">MASS_STORE_DATA_IN_PIPE</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ab3dcc3c4f280d547ff56a8f4d3f37ccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8602b23c0ce3697046347f05cde7286"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#aa8602b23c0ce3697046347f05cde7286">MASS_STORE_DATA_OUT_PIPE</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:aa8602b23c0ce3697046347f05cde7286"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4aa013dcadafef41c5377c0f5e7c4184"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#a4aa013dcadafef41c5377c0f5e7c4184">MASS_STORE_SCSI_COMMAND_FAILED</a>&#160;&#160;&#160;0xC0</td></tr>
<tr class="separator:a4aa013dcadafef41c5377c0f5e7c4184"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a95307d6a92e0e35f62db1a87d322d59f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#a95307d6a92e0e35f62db1a87d322d59f">MassStorageHost_CommandStatusCodes_t</a> { <br />
&#160;&#160;<a class="el" href="a00009.html#a95307d6a92e0e35f62db1a87d322d59fa0161cfb22f2537931b6703dd1210dcff">Command_Pass</a> = 0, 
<br />
&#160;&#160;<a class="el" href="a00009.html#a95307d6a92e0e35f62db1a87d322d59fa9c35fdf9575a3704e1b90560ff2cba80">Command_Fail</a> = 1, 
<br />
&#160;&#160;<a class="el" href="a00009.html#a95307d6a92e0e35f62db1a87d322d59fa0954410ecc72a454dfb225821db81d3b">Phase_Error</a> = 2
<br />
 }</td></tr>
<tr class="separator:a95307d6a92e0e35f62db1a87d322d59f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac6b179eea18f5d947233a95bb5d85483"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ac6b179eea18f5d947233a95bb5d85483">MassStore_MassStorageReset</a> (void)</td></tr>
<tr class="separator:ac6b179eea18f5d947233a95bb5d85483"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad80d5405f03c08f662de9db05163f82b"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ad80d5405f03c08f662de9db05163f82b">MassStore_GetMaxLUN</a> (uint8_t *const MaxLUNIndex)</td></tr>
<tr class="separator:ad80d5405f03c08f662de9db05163f82b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab76d2c060a6e26073f4d03eb6abf46f"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#aab76d2c060a6e26073f4d03eb6abf46f">MassStore_RequestSense</a> (const uint8_t LUNIndex, <a class="el" href="a00005.html">SCSI_Request_Sense_Response_t</a> *const SensePtr) ATTR_NON_NULL_PTR_ARG(2)</td></tr>
<tr class="separator:aab76d2c060a6e26073f4d03eb6abf46f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a919d454911b919c81784937f273d4062"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#a919d454911b919c81784937f273d4062">MassStore_Inquiry</a> (const uint8_t LUNIndex, <a class="el" href="a00004.html">SCSI_Inquiry_Response_t</a> *const InquiryPtr) ATTR_NON_NULL_PTR_ARG(2)</td></tr>
<tr class="separator:a919d454911b919c81784937f273d4062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac205f3a5a0545a7ce4fd12f275f47848"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ac205f3a5a0545a7ce4fd12f275f47848">MassStore_ReadDeviceBlock</a> (const uint8_t LUNIndex, const uint32_t BlockAddress, const uint8_t Blocks, const uint16_t BlockSize, void *BufferPtr) ATTR_NON_NULL_PTR_ARG(5)</td></tr>
<tr class="separator:ac205f3a5a0545a7ce4fd12f275f47848"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab07ae7fad4ea55bccea42aba8e87b94a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ab07ae7fad4ea55bccea42aba8e87b94a">MassStore_WriteDeviceBlock</a> (const uint8_t LUNIndex, const uint32_t BlockAddress, const uint8_t Blocks, const uint16_t BlockSize, void *BufferPtr) ATTR_NON_NULL_PTR_ARG(5)</td></tr>
<tr class="separator:ab07ae7fad4ea55bccea42aba8e87b94a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e23edaaf24892d6128a7b4c46bfbd5e"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#a7e23edaaf24892d6128a7b4c46bfbd5e">MassStore_ReadCapacity</a> (const uint8_t LUNIndex, <a class="el" href="a00003.html">SCSI_Capacity_t</a> *const CapacityPtr) ATTR_NON_NULL_PTR_ARG(2)</td></tr>
<tr class="separator:a7e23edaaf24892d6128a7b4c46bfbd5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8e1a76103edb7da05f5c28d805ad985"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#ad8e1a76103edb7da05f5c28d805ad985">MassStore_TestUnitReady</a> (const uint8_t LUNIndex)</td></tr>
<tr class="separator:ad8e1a76103edb7da05f5c28d805ad985"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2886bf820904f36ca464ba357219e649"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00009.html#a2886bf820904f36ca464ba357219e649">MassStore_PreventAllowMediumRemoval</a> (const uint8_t LUNIndex, const bool PreventRemoval)</td></tr>
<tr class="separator:a2886bf820904f36ca464ba357219e649"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for <a class="el" href="a00008.html">MassStoreCommands.c</a>. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ac6720d81afa7c89b4ac87928c591883c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CBW_SIGNATURE&#160;&#160;&#160;0x43425355UL</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Command Block Wrapper signature byte, for verification of valid CBW blocks. </p>

</div>
</div>
<a class="anchor" id="ae99a70b8e008b17033dcfb19c8976cb0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMAND_DATA_TIMEOUT_MS&#160;&#160;&#160;10000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Timeout period between the issuing of a CBW to a device, and the reception of the first packet. </p>

</div>
</div>
<a class="anchor" id="a0d1cac717714b1805917994b1671b61b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMAND_DIRECTION_DATA_IN&#160;&#160;&#160;(1 &lt;&lt; 7)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Data direction mask for the Flags field of a CBW, indicating Device-to-Host transfer direction. </p>

</div>
</div>
<a class="anchor" id="a67558cbba737fb0f865d76920dde0449"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMAND_DIRECTION_DATA_OUT&#160;&#160;&#160;(0 &lt;&lt; 7)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Data direction mask for the Flags field of a CBW, indicating Host-to-Device transfer direction. </p>

</div>
</div>
<a class="anchor" id="aa64c08764b0b19dd484ee177c32bcf49"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CSW_SIGNATURE&#160;&#160;&#160;0x53425355UL</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Command Static Wrapper signature byte, for verification of valid CSW blocks. </p>

</div>
</div>
<a class="anchor" id="ab3dcc3c4f280d547ff56a8f4d3f37ccb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MASS_STORE_DATA_IN_PIPE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pipe number of the Mass Storage data IN pipe. </p>

</div>
</div>
<a class="anchor" id="aa8602b23c0ce3697046347f05cde7286"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MASS_STORE_DATA_OUT_PIPE&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pipe number of the Mass Storage data OUT pipe. </p>

</div>
</div>
<a class="anchor" id="a4aa013dcadafef41c5377c0f5e7c4184"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MASS_STORE_SCSI_COMMAND_FAILED&#160;&#160;&#160;0xC0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Additional error code for Mass Storage functions when a device returns a logical command failure. </p>

</div>
</div>
<a class="anchor" id="ac0876c839c43c9c05f5a917d3b46ceaf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REQ_GetMaxLUN&#160;&#160;&#160;0xFE</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Class specific request to retrieve the maximum Logical Unit Number (LUN) index of the attached device. </p>

</div>
</div>
<a class="anchor" id="acb9a039894443da8410cb4fa3df22be6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REQ_MassStorageReset&#160;&#160;&#160;0xFF</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Class specific request to reset the Mass Storage interface of the attached device. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a95307d6a92e0e35f62db1a87d322d59f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="a00009.html#a95307d6a92e0e35f62db1a87d322d59f">MassStorageHost_CommandStatusCodes_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>CSW status return codes, indicating the overall status of the issued CBW. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a95307d6a92e0e35f62db1a87d322d59fa0161cfb22f2537931b6703dd1210dcff"></a>Command_Pass&#160;</td><td class="fielddoc">
<p>Command completed successfully </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a95307d6a92e0e35f62db1a87d322d59fa9c35fdf9575a3704e1b90560ff2cba80"></a>Command_Fail&#160;</td><td class="fielddoc">
<p>Command failed to complete successfully </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a95307d6a92e0e35f62db1a87d322d59fa0954410ecc72a454dfb225821db81d3b"></a>Phase_Error&#160;</td><td class="fielddoc">
<p>Phase error while processing the issued command </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ad80d5405f03c08f662de9db05163f82b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_GetMaxLUN </td>
          <td>(</td>
          <td class="paramtype">uint8_t *const&#160;</td>
          <td class="paramname"><em>MaxLUNIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Issues a Mass Storage class specific request to determine the index of the highest numbered Logical Unit in the attached device.</p>
<dl class="section note"><dt>Note</dt><dd>Some devices do not support this request, and will STALL it when issued. To get around this, on unsupported devices the max LUN index will be reported as zero and no error will be returned if the device STALLs the request.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">MaxLUNIndex</td><td>Pointer to the location that the maximum LUN index value should be stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A value from the USB_Host_SendControlErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
<a class="anchor" id="a919d454911b919c81784937f273d4062"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_Inquiry </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>LUNIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00004.html">SCSI_Inquiry_Response_t</a> *const&#160;</td>
          <td class="paramname"><em>InquiryPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Issues a SCSI Inquiry command to the attached device, to determine the device's information. This gives information on the device's capabilities.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">LUNIndex</td><td>Index of the LUN inside the device the command is being addressed to </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">InquiryPtr</td><td>Pointer to the inquiry data structure where the inquiry data from the device is to be stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A value from the Pipe_Stream_RW_ErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
<a class="anchor" id="ac6b179eea18f5d947233a95bb5d85483"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_MassStorageReset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Issues a Mass Storage class specific request to reset the attached device's Mass Storage interface, readying the device for the next CBW.</p>
<dl class="section return"><dt>Returns</dt><dd>A value from the USB_Host_SendControlErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
<a class="anchor" id="a2886bf820904f36ca464ba357219e649"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_PreventAllowMediumRemoval </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>LUNIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>PreventRemoval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Issues a SCSI Device Prevent/Allow Medium Removal command to the attached device, to lock the physical media from being removed. This is a legacy command for SCSI disks with removable storage (such as ZIP disks), but should still be issued before the first read or write command is sent.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">LUNIndex</td><td>Index of the LUN inside the device the command is being addressed to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">PreventRemoval</td><td>Whether or not the LUN media should be locked to prevent removal or not</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A value from the Pipe_Stream_RW_ErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
<a class="anchor" id="a7e23edaaf24892d6128a7b4c46bfbd5e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_ReadCapacity </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>LUNIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00003.html">SCSI_Capacity_t</a> *const&#160;</td>
          <td class="paramname"><em>CapacityPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Issues a SCSI Device Read Capacity command to the attached device, to determine the capacity of the given Logical Unit within the device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">LUNIndex</td><td>Index of the LUN inside the device the command is being addressed to </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">CapacityPtr</td><td>Device capacity structure where the capacity data is to be stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A value from the Pipe_Stream_RW_ErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
<a class="anchor" id="ac205f3a5a0545a7ce4fd12f275f47848"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_ReadDeviceBlock </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>LUNIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>BlockAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>Blocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16_t&#160;</td>
          <td class="paramname"><em>BlockSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>BufferPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Issues a SCSI Device Block Read command to the attached device, to read in one or more data blocks from the storage medium into a buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">LUNIndex</td><td>Index of the LUN inside the device the command is being addressed to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">BlockAddress</td><td>Start block address to read from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Blocks</td><td>Number of blocks to read from the device </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">BlockSize</td><td>Size in bytes of each block to read </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">BufferPtr</td><td>Pointer to the buffer where the read data is to be written to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A value from the Pipe_Stream_RW_ErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
<a class="anchor" id="aab76d2c060a6e26073f4d03eb6abf46f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_RequestSense </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>LUNIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00005.html">SCSI_Request_Sense_Response_t</a> *const&#160;</td>
          <td class="paramname"><em>SensePtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Issues a SCSI Request Sense command to the attached device, to determine the current SCSI sense information. This gives error codes for the last issued SCSI command to the device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">LUNIndex</td><td>Index of the LUN inside the device the command is being addressed to </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">SensePtr</td><td>Pointer to the sense data structure where the sense data from the device is to be stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A value from the Pipe_Stream_RW_ErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
<a class="anchor" id="ad8e1a76103edb7da05f5c28d805ad985"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_TestUnitReady </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>LUNIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Issues a SCSI Device Test Unit Ready command to the attached device, to determine if the device is ready to accept other commands.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">LUNIndex</td><td>Index of the LUN inside the device the command is being addressed to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A value from the Pipe_Stream_RW_ErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
<a class="anchor" id="ab07ae7fad4ea55bccea42aba8e87b94a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MassStore_WriteDeviceBlock </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>LUNIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>BlockAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>Blocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16_t&#160;</td>
          <td class="paramname"><em>BlockSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>BufferPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Issues a SCSI Device Block Write command to the attached device, to write one or more data blocks to the storage medium from a buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">LUNIndex</td><td>Index of the LUN inside the device the command is being addressed to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">BlockAddress</td><td>Start block address to write to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Blocks</td><td>Number of blocks to write to in the device </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">BlockSize</td><td>Size in bytes of each block to write </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">BufferPtr</td><td>Pointer to the buffer where the write data is to be sourced from</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A value from the Pipe_Stream_RW_ErrorCodes_t enum, or MASS_STORE_SCSI_COMMAND_FAILED if the SCSI command fails </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8f3de2ae926fecfe6abd5379fd2b6eb1.html">Lib</a></li><li class="navelem"><a class="el" href="a00009.html">MassStoreCommands.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
