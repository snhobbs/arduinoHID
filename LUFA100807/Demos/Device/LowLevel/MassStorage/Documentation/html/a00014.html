<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>LUFA Library - Mass Storage Device Demo: MassStorage.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LUFA Library - Mass Storage Device Demo
   &#160;<span id="projectnumber">0.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00014.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">MassStorage.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;avr/io.h&gt;</code><br />
<code>#include &lt;avr/wdt.h&gt;</code><br />
<code>#include &lt;avr/power.h&gt;</code><br />
<code>#include &lt;avr/interrupt.h&gt;</code><br />
<code>#include &quot;<a class="el" href="a00007.html">Descriptors.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a00011.html">Lib/SCSI.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a00009.html">Lib/DataflashManager.h</a>&quot;</code><br />
<code>#include &lt;LUFA/Version.h&gt;</code><br />
<code>#include &lt;LUFA/Drivers/USB/USB.h&gt;</code><br />
<code>#include &lt;LUFA/Drivers/Board/LEDs.h&gt;</code><br />
<code>#include &lt;LUFA/Drivers/Board/Dataflash.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00001.html">CommandBlockWrapper_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00002.html">CommandStatusWrapper_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:acb9a039894443da8410cb4fa3df22be6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#acb9a039894443da8410cb4fa3df22be6">REQ_MassStorageReset</a>&#160;&#160;&#160;0xFF</td></tr>
<tr class="separator:acb9a039894443da8410cb4fa3df22be6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0876c839c43c9c05f5a917d3b46ceaf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#ac0876c839c43c9c05f5a917d3b46ceaf">REQ_GetMaxLUN</a>&#160;&#160;&#160;0xFE</td></tr>
<tr class="separator:ac0876c839c43c9c05f5a917d3b46ceaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae165b536bdf28074c6a66be81866b866"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#ae165b536bdf28074c6a66be81866b866">MAX_SCSI_COMMAND_LENGTH</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:ae165b536bdf28074c6a66be81866b866"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6720d81afa7c89b4ac87928c591883c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#ac6720d81afa7c89b4ac87928c591883c">CBW_SIGNATURE</a>&#160;&#160;&#160;0x43425355UL</td></tr>
<tr class="separator:ac6720d81afa7c89b4ac87928c591883c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa64c08764b0b19dd484ee177c32bcf49"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#aa64c08764b0b19dd484ee177c32bcf49">CSW_SIGNATURE</a>&#160;&#160;&#160;0x53425355UL</td></tr>
<tr class="separator:aa64c08764b0b19dd484ee177c32bcf49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67558cbba737fb0f865d76920dde0449"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#a67558cbba737fb0f865d76920dde0449">COMMAND_DIRECTION_DATA_OUT</a>&#160;&#160;&#160;(0 &lt;&lt; 7)</td></tr>
<tr class="separator:a67558cbba737fb0f865d76920dde0449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d1cac717714b1805917994b1671b61b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#a0d1cac717714b1805917994b1671b61b">COMMAND_DIRECTION_DATA_IN</a>&#160;&#160;&#160;(1 &lt;&lt; 7)</td></tr>
<tr class="separator:a0d1cac717714b1805917994b1671b61b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35a06cf522ba5b8ef837c8c5e0bee17b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#a35a06cf522ba5b8ef837c8c5e0bee17b">LEDMASK_USB_NOTREADY</a>&#160;&#160;&#160;LEDS_LED1</td></tr>
<tr class="separator:a35a06cf522ba5b8ef837c8c5e0bee17b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5f555e6ba3f29cf2683653715b2882b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#ae5f555e6ba3f29cf2683653715b2882b">LEDMASK_USB_ENUMERATING</a>&#160;&#160;&#160;(LEDS_LED2 | LEDS_LED3)</td></tr>
<tr class="separator:ae5f555e6ba3f29cf2683653715b2882b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bdfeb2384ab943afb611716fb2034ee"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#a1bdfeb2384ab943afb611716fb2034ee">LEDMASK_USB_READY</a>&#160;&#160;&#160;(LEDS_LED2 | LEDS_LED4)</td></tr>
<tr class="separator:a1bdfeb2384ab943afb611716fb2034ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c02d2f661a67e5d895a637b1786e495"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#a9c02d2f661a67e5d895a637b1786e495">LEDMASK_USB_ERROR</a>&#160;&#160;&#160;(LEDS_LED1 | LEDS_LED3)</td></tr>
<tr class="separator:a9c02d2f661a67e5d895a637b1786e495"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e041687ba6fa46320c904de65419fa8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#a8e041687ba6fa46320c904de65419fa8">LEDMASK_USB_BUSY</a>&#160;&#160;&#160;LEDS_LED2</td></tr>
<tr class="separator:a8e041687ba6fa46320c904de65419fa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a9bbdc5049471e62c0a68aab12c530f7d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#a9bbdc5049471e62c0a68aab12c530f7d">MassStorage_CommandStatusCodes_t</a> { <br />
&#160;&#160;<a class="el" href="a00014.html#a9bbdc5049471e62c0a68aab12c530f7da0161cfb22f2537931b6703dd1210dcff">Command_Pass</a> = 0, 
<br />
&#160;&#160;<a class="el" href="a00014.html#a9bbdc5049471e62c0a68aab12c530f7da9c35fdf9575a3704e1b90560ff2cba80">Command_Fail</a> = 1, 
<br />
&#160;&#160;<a class="el" href="a00014.html#a9bbdc5049471e62c0a68aab12c530f7da0954410ecc72a454dfb225821db81d3b">Phase_Error</a> = 2
<br />
 }</td></tr>
<tr class="separator:a9bbdc5049471e62c0a68aab12c530f7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acb27e569c06a2797c5fd58ed39147448"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#acb27e569c06a2797c5fd58ed39147448">SetupHardware</a> (void)</td></tr>
<tr class="separator:acb27e569c06a2797c5fd58ed39147448"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2366751aad393f7e49384b76dfdbfc05"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#a2366751aad393f7e49384b76dfdbfc05">MassStorage_Task</a> (void)</td></tr>
<tr class="separator:a2366751aad393f7e49384b76dfdbfc05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeff97648c9250a3d398bb0b74f040899"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#aeff97648c9250a3d398bb0b74f040899">EVENT_USB_Device_Connect</a> (void)</td></tr>
<tr class="separator:aeff97648c9250a3d398bb0b74f040899"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae88405d14d8d6dada9313520cb1501ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#ae88405d14d8d6dada9313520cb1501ec">EVENT_USB_Device_Disconnect</a> (void)</td></tr>
<tr class="separator:ae88405d14d8d6dada9313520cb1501ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a953a275884b9e33629ff6323fca05252"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#a953a275884b9e33629ff6323fca05252">EVENT_USB_Device_ConfigurationChanged</a> (void)</td></tr>
<tr class="separator:a953a275884b9e33629ff6323fca05252"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbebc3cb66ac3945b938ae5b93a71ea8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#abbebc3cb66ac3945b938ae5b93a71ea8">EVENT_USB_Device_UnhandledControlRequest</a> (void)</td></tr>
<tr class="separator:abbebc3cb66ac3945b938ae5b93a71ea8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0404d021554ccc86fcb2b40c3083aeb4"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#a0404d021554ccc86fcb2b40c3083aeb4">StreamCallback_AbortOnMassStoreReset</a> (void)</td></tr>
<tr class="separator:a0404d021554ccc86fcb2b40c3083aeb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a31780559e7a9c322e16adb1d2ef4625e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00001.html">CommandBlockWrapper_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#a31780559e7a9c322e16adb1d2ef4625e">CommandBlock</a></td></tr>
<tr class="separator:a31780559e7a9c322e16adb1d2ef4625e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbb7d1de681baffcbb200c3c4eb8e73e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00002.html">CommandStatusWrapper_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#adbb7d1de681baffcbb200c3c4eb8e73e">CommandStatus</a></td></tr>
<tr class="separator:adbb7d1de681baffcbb200c3c4eb8e73e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa696f7a79b9109ea7f508d87861e1bf9"><td class="memItemLeft" align="right" valign="top">volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00014.html#aa696f7a79b9109ea7f508d87861e1bf9">IsMassStoreReset</a></td></tr>
<tr class="separator:aa696f7a79b9109ea7f508d87861e1bf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for <a class="el" href="a00013.html">MassStorage.c</a>. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ac6720d81afa7c89b4ac87928c591883c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CBW_SIGNATURE&#160;&#160;&#160;0x43425355UL</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Magic signature for a Command Block Wrapper used in the Mass Storage Bulk-Only transport protocol. </p>

</div>
</div>
<a class="anchor" id="a0d1cac717714b1805917994b1671b61b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMAND_DIRECTION_DATA_IN&#160;&#160;&#160;(1 &lt;&lt; 7)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mask for a Command Block Wrapper's flags attribute to specify a command with data sent from device-to-host. </p>

</div>
</div>
<a class="anchor" id="a67558cbba737fb0f865d76920dde0449"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMAND_DIRECTION_DATA_OUT&#160;&#160;&#160;(0 &lt;&lt; 7)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mask for a Command Block Wrapper's flags attribute to specify a command with data sent from host-to-device. </p>

</div>
</div>
<a class="anchor" id="aa64c08764b0b19dd484ee177c32bcf49"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CSW_SIGNATURE&#160;&#160;&#160;0x53425355UL</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Magic signature for a Command Status Wrapper used in the Mass Storage Bulk-Only transport protocol. </p>

</div>
</div>
<a class="anchor" id="a8e041687ba6fa46320c904de65419fa8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEDMASK_USB_BUSY&#160;&#160;&#160;LEDS_LED2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>LED mask for the library LED driver, to indicate that the USB interface is busy. </p>

</div>
</div>
<a class="anchor" id="ae5f555e6ba3f29cf2683653715b2882b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEDMASK_USB_ENUMERATING&#160;&#160;&#160;(LEDS_LED2 | LEDS_LED3)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>LED mask for the library LED driver, to indicate that the USB interface is enumerating. </p>

</div>
</div>
<a class="anchor" id="a9c02d2f661a67e5d895a637b1786e495"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEDMASK_USB_ERROR&#160;&#160;&#160;(LEDS_LED1 | LEDS_LED3)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>LED mask for the library LED driver, to indicate that an error has occurred in the USB interface. </p>

</div>
</div>
<a class="anchor" id="a35a06cf522ba5b8ef837c8c5e0bee17b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEDMASK_USB_NOTREADY&#160;&#160;&#160;LEDS_LED1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>LED mask for the library LED driver, to indicate that the USB interface is not ready. </p>

</div>
</div>
<a class="anchor" id="a1bdfeb2384ab943afb611716fb2034ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEDMASK_USB_READY&#160;&#160;&#160;(LEDS_LED2 | LEDS_LED4)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>LED mask for the library LED driver, to indicate that the USB interface is ready. </p>

</div>
</div>
<a class="anchor" id="ae165b536bdf28074c6a66be81866b866"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_SCSI_COMMAND_LENGTH&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum length of a SCSI command which can be issued by the device or host in a Mass Storage bulk wrapper. </p>

</div>
</div>
<a class="anchor" id="ac0876c839c43c9c05f5a917d3b46ceaf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REQ_GetMaxLUN&#160;&#160;&#160;0xFE</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mass Storage Class specific request to retrieve the total number of Logical Units (drives) in the SCSI device. </p>

</div>
</div>
<a class="anchor" id="acb9a039894443da8410cb4fa3df22be6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REQ_MassStorageReset&#160;&#160;&#160;0xFF</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mass Storage Class specific request to reset the Mass Storage interface, ready for the next command. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a9bbdc5049471e62c0a68aab12c530f7d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="a00014.html#a9bbdc5049471e62c0a68aab12c530f7d">MassStorage_CommandStatusCodes_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enum for the possible command status wrapper return status codes. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a9bbdc5049471e62c0a68aab12c530f7da0161cfb22f2537931b6703dd1210dcff"></a>Command_Pass&#160;</td><td class="fielddoc">
<p>Command completed with no error </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a9bbdc5049471e62c0a68aab12c530f7da9c35fdf9575a3704e1b90560ff2cba80"></a>Command_Fail&#160;</td><td class="fielddoc">
<p>Command failed to complete - host may check the exact error via a SCSI REQUEST SENSE command </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a9bbdc5049471e62c0a68aab12c530f7da0954410ecc72a454dfb225821db81d3b"></a>Phase_Error&#160;</td><td class="fielddoc">
<p>Command failed due to being invalid in the current phase </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a953a275884b9e33629ff6323fca05252"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_ConfigurationChanged </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event handler for the USB_ConfigurationChanged event. This is fired when the host set the current configuration of the USB device after enumeration - the device endpoints are configured and the Mass Storage management task started. </p>

</div>
</div>
<a class="anchor" id="aeff97648c9250a3d398bb0b74f040899"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_Connect </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event handler for the USB_Connect event. This indicates that the device is enumerating via the status LEDs. </p>

</div>
</div>
<a class="anchor" id="ae88405d14d8d6dada9313520cb1501ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_Disconnect </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event handler for the USB_Disconnect event. This indicates that the device is no longer connected to a host via the status LEDs and stops the Mass Storage management task. </p>

</div>
</div>
<a class="anchor" id="abbebc3cb66ac3945b938ae5b93a71ea8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EVENT_USB_Device_UnhandledControlRequest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event handler for the USB_UnhandledControlPacket event. This is used to catch standard and class specific control requests that are not handled internally by the USB library (including the Mass Storage class-specific requests) so that they can be handled appropriately for the application. </p>

</div>
</div>
<a class="anchor" id="a2366751aad393f7e49384b76dfdbfc05"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MassStorage_Task </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Task to manage the Mass Storage interface, reading in Command Block Wrappers from the host, processing the SCSI commands they contain, and returning Command Status Wrappers back to the host to indicate the success or failure of the last issued command. </p>

</div>
</div>
<a class="anchor" id="acb27e569c06a2797c5fd58ed39147448"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SetupHardware </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures the board hardware and chip peripherals for the demo's functionality. </p>

</div>
</div>
<a class="anchor" id="a0404d021554ccc86fcb2b40c3083aeb4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t StreamCallback_AbortOnMassStoreReset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stream callback function for the Endpoint stream read and write functions. This callback will abort the current stream transfer if a Mass Storage Reset request has been issued to the control endpoint. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a31780559e7a9c322e16adb1d2ef4625e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00001.html">CommandBlockWrapper_t</a> CommandBlock</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Structure to hold the latest Command Block Wrapper issued by the host, containing a SCSI command to execute. </p>

</div>
</div>
<a class="anchor" id="adbb7d1de681baffcbb200c3c4eb8e73e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00002.html">CommandStatusWrapper_t</a> CommandStatus</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Structure to hold the latest Command Status Wrapper to return to the host, containing the status of the last issued command. </p>

</div>
</div>
<a class="anchor" id="aa696f7a79b9109ea7f508d87861e1bf9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool IsMassStoreReset</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flag to asynchronously abort any in-progress data transfers upon the reception of a mass storage reset command. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00014.html">MassStorage.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
